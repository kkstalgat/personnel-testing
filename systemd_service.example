# Пример systemd service файла для Gunicorn
# Скопируйте в /etc/systemd/system/personnel_testing.service
# Затем: sudo systemctl daemon-reload && sudo systemctl enable personnel_testing

[Unit]
Description=Personnel Testing Gunicorn daemon
After=network.target postgresql.service
Requires=postgresql.service

[Service]
User=deploy
Group=deploy
WorkingDirectory=/var/www/personnel_testing
Environment="PATH=/var/www/personnel_testing/venv/bin"
Environment="DJANGO_SETTINGS_MODULE=personnel_testing.settings"

# Использование конфигурационного файла Gunicorn
ExecStart=/var/www/personnel_testing/venv/bin/gunicorn \
    --config /var/www/personnel_testing/gunicorn_config.py \
    personnel_testing.wsgi:application

# Или без конфигурационного файла:
# ExecStart=/var/www/personnel_testing/venv/bin/gunicorn \
#     --workers 3 \
#     --bind unix:/var/www/personnel_testing/personnel_testing.sock \
#     --access-logfile /var/www/personnel_testing/logs/access.log \
#     --error-logfile /var/www/personnel_testing/logs/error.log \
#     personnel_testing.wsgi:application

Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
